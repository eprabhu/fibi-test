databaseChangeLog:
    - changeSet:
        id: FIBI-8180
        author: Arun Ramesh
        labels: 'DML'
        comment: Dynamic config for elastic sync for SMU instance.
        changes:
            - sql:
                sql: |
                    SET SQL_SAFE_UPDATES = 0;
                    UPDATE integration_sync_config
                    SET 
                        IS_ACTIVE = 'N',
                        UPDATE_TIMESTAMP = utc_timestamp(),
                        UPDATE_USER = 'admin'
                    WHERE CONFIG_CATEGORY = 'elastic_sync';
                    SET SQL_SAFE_UPDATES = 1;
        rollback: empty

    - changeSet:
        id: FIBI-8181
        author: Arun Ramesh
        labels: 'DML'
        comment: Dynamic config for integration sync for SMU instance.
        changes:
            - sql:
                sql: |
                    SET SQL_SAFE_UPDATES = 0;
                    UPDATE integration_sync_config
                    SET 
                        IS_ACTIVE = CASE 
                                        WHEN CONFIG_KEY IN ('attachment_data_migration', 'fi_expense_transaction_rt_processing', 'fi_revenue_transaction_rt_processing', 'sync_orcid', 'workday_cost_allocation', 'workday_cost_reconciliation', 'workday_close_position', 'designation_change', 'student_ics_integration', 'update_claim_duration', 'sync_aderp_annual_budget', 'scopus_integration') THEN 'Y'
                                        ELSE 'N'
                                    END,
                        UPDATE_TIMESTAMP = utc_timestamp(),
                        UPDATE_USER = 'admin'
                    WHERE CONFIG_CATEGORY = 'integration_sync';
                    SET SQL_SAFE_UPDATES = 1;
        rollback: empty
