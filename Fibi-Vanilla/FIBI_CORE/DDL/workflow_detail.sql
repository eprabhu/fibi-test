DROP TABLE IF EXISTS `workflow_detail`;

CREATE TABLE `workflow_detail` (
  `WORKFLOW_DETAIL_ID` int NOT NULL AUTO_INCREMENT,
  `WORKFLOW_ID` int DEFAULT NULL,
  `MAP_ID` int DEFAULT NULL,
  `MAP_NUMBER` int DEFAULT NULL,
  `APPROVAL_STOP_NUMBER` int DEFAULT NULL,
  `APPROVER_NUMBER` int DEFAULT NULL,
  `PRIMARY_APPROVER_FLAG` varchar(1) DEFAULT NULL,
  `APPROVER_PERSON_ID` varchar(40) DEFAULT NULL,
  `APPROVER_PERSON_NAME` varchar(90) DEFAULT NULL,
  `APPROVAL_STATUS` varchar(1) DEFAULT NULL,
  `DELEGATED_BY_PERSON_ID` varchar(40) DEFAULT NULL,
  `APPROVAL_COMMENT` varchar(2000) DEFAULT NULL,
  `APPROVAL_DATE` datetime DEFAULT NULL,
  `UPDATE_USER` varchar(60) DEFAULT NULL,
  `UPDATE_TIMESTAMP` datetime DEFAULT NULL,
  `UNIT_NUMBER` varchar(8) DEFAULT NULL,
  `ROLE_TYPE_CODE` int DEFAULT NULL,
  `EMAIL_ADDRESS` varchar(255) DEFAULT NULL,
  `STOP_NAME` varchar(200) DEFAULT NULL,
  `MAP_NAME` varchar(200) DEFAULT NULL,
  `MAP_DESCRIPTION` varchar(200) DEFAULT NULL,
  `CREATE_USER` varchar(60) DEFAULT NULL,
  `NOTE` varchar(2000) DEFAULT NULL,
  `CREATE_TIMESTAMP` datetime DEFAULT NULL,
  `ADMIN_GROUP_ID` int DEFAULT NULL,
  PRIMARY KEY (`WORKFLOW_DETAIL_ID`),
  KEY `WORKFLOW_DETAIL_FK1` (`WORKFLOW_ID`),
  KEY `WORKFLOW_DETAIL_FK2` (`MAP_ID`),
  KEY `WORKFLOW_DETAIL_FK3` (`APPROVAL_STATUS`),
  KEY `WORKFLOW_DETAIL_FK4` (`ROLE_TYPE_CODE`),
  KEY `WORKFLOW_DETAIL_FK5` (`APPROVER_PERSON_ID`,`WORKFLOW_ID`),
  KEY `WORKFLOW_DETAIL_FK6` (`ADMIN_GROUP_ID`),
  CONSTRAINT `WORKFLOW_DETAIL_FK1` FOREIGN KEY (`WORKFLOW_ID`) REFERENCES `workflow` (`WORKFLOW_ID`),
  CONSTRAINT `WORKFLOW_DETAIL_FK2` FOREIGN KEY (`MAP_ID`) REFERENCES `workflow_map` (`MAP_ID`),
  CONSTRAINT `WORKFLOW_DETAIL_FK3` FOREIGN KEY (`APPROVAL_STATUS`) REFERENCES `workflow_status` (`APPROVAL_STATUS`),
  CONSTRAINT `WORKFLOW_DETAIL_FK4` FOREIGN KEY (`ROLE_TYPE_CODE`) REFERENCES `person_role_type` (`ROLE_TYPE_CODE`),
  CONSTRAINT `WORKFLOW_DETAIL_FK6` FOREIGN KEY (`ADMIN_GROUP_ID`) REFERENCES `admin_group` (`ADMIN_GROUP_ID`)
);
