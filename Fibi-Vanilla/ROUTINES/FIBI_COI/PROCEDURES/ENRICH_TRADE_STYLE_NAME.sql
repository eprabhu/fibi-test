


CREATE PROCEDURE `ENRICH_TRADE_STYLE_NAME`(
    IN AV_ENTITY_ID INT,
    IN AV_TRADE_STYLE_NAME VARCHAR(200),
    IN AV_PRIORITY VARCHAR(10),
    IN AV_PERSON_ID VARCHAR(40)
)
BEGIN
    DECLARE trade_style_exists INT DEFAULT 0;

    SELECT COUNT(ENTITY_ID) INTO trade_style_exists
    FROM entity_trade_style_name
    WHERE ENTITY_ID = AV_ENTITY_ID 
    AND TRADE_STYLE_NAME = AV_TRADE_STYLE_NAME;

    IF trade_style_exists = 0 THEN
        INSERT INTO entity_trade_style_name (ENTITY_ID, TRADE_STYLE_NAME, PRIORITY, UPDATED_BY, UPDATE_TIMESTAMP)
		VALUES ( AV_ENTITY_ID, AV_TRADE_STYLE_NAME, AV_PRIORITY, AV_PERSON_ID, NOW());
    END IF;
END