-- `FN_CHECK_APPROVED_BUDGET_CREATED`; 

CREATE FUNCTION `FN_CHECK_APPROVED_BUDGET_CREATED`(
AV_PROPOSAL_ID  INT
) RETURNS varchar(10) 
    DETERMINISTIC
BEGIN
DECLARE LI_COUNT INT;
SELECT COUNT(*)  INTO LI_COUNT 
FROM Budget_Header 
WHERE IS_APPROVED_BUDGET='Y' AND PROPOSAL_ID = AV_PROPOSAL_ID;
IF LI_COUNT > 0 THEN
	RETURN 'TRUE';
else
	RETURN 'FALSE';
END IF;
END
