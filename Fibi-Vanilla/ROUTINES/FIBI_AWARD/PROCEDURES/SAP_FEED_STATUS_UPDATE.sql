-- `SAP_FEED_STATUS_UPDATE`; 

CREATE PROCEDURE `SAP_FEED_STATUS_UPDATE`(AV_AWARD_NUMBER VARCHAR(12))
BEGIN
DECLARE AV_FEED_ID INT;
SET SQL_SAFE_UPDATES =0;
SELECT FEED_ID INTO AV_FEED_ID FROM SAP_AWARD_FEED WHERE AWARD_NUMBER = AV_AWARD_NUMBER AND FEED_STATUS = 'F';
UPDATE SAP_FEED_TMPL_FUNDED_PRGM  SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE SAP_FEED_TMPL_GRANT_BUD_MASTER SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE SAP_FEED_TMPL_GRANT_MASTER SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE SAP_FEED_TMPL_PROJECT_DEF SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE SAP_FEED_TMPL_WBS SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE SAP_FEED_TMPL_SPONSOR_CLASS SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE SAP_FEED_TMPL_SPONSOR_PRGM SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE SAP_FEED_TMPL_FM_BUDGET SET FEED_STATUS = 'S' where FEED_ID = AV_FEED_ID;
UPDATE sap_feed_tmpl_gm_derivation SET FEED_STATUS = 'S'  where FEED_ID = AV_FEED_ID;
UPDATE sap_feed_tmpl_fm_derivation SET FEED_STATUS = 'S'  where FEED_ID = AV_FEED_ID;
UPDATE SAP_AWARD_FEED  SET FEED_STATUS = 'R' where FEED_ID = AV_FEED_ID;
UPDATE award_budget_header SET AWARD_BUDGET_STATUS_CODE = '9' where  AWARD_NUMBER = AV_AWARD_NUMBER and AWARD_BUDGET_STATUS_CODE ='10';
SET SQL_SAFE_UPDATES =1;
END
