-- `FN_CHK_TIMESHEET_MANDATORY`; 


CREATE FUNCTION `FN_CHK_TIMESHEET_MANDATORY`(  
AV_AWARD_ID    varchar(6)
) RETURNS varchar(10) 
    DETERMINISTIC
BEGIN
DECLARE LI_VALUE VARCHAR(200);
	SELECT VALUE INTO LI_VALUE FROM CUSTOM_DATA 
	WHERE CUSTOM_DATA_ELEMENTS_ID = (SELECT CUSTOM_DATA_ELEMENTS_ID FROM CUSTOM_DATA_ELEMENTS WHERE CUSTOM_ELEMENT_NAME = 'Key Person Timesheet') 
	AND MODULE_ITEM_CODE = 1 
	AND MODULE_SUB_ITEM_CODE = 0 
	AND MODULE_ITEM_KEY = AV_AWARD_ID 
	AND MODULE_SUB_ITEM_KEY = '0';
    IF LI_VALUE = 'Yes' THEN
    
		RETURN 'TRUE';
	ELSE
		RETURN 'FALSE';
    END IF;
END
