CREATE  PROCEDURE GET_SR_DETAILS_FOR_ASSOC(
    IN AV_MODULE_ITEM_ID INT
)
BEGIN

SELECT 'ID' 
	   ,'Title'
       ,'Status'
       ,'Reporter'
       ,'Lead Unit'
	   ,'Type'
       ,'Category'
UNION
SELECT T1.SR_HEADER_ID,
       T1.SUBJECT,
       T2.DESCRIPTION,
       T7.FULL_NAME AS REPORTER_FUL_NAME,
       T4.DISPLAY_NAME AS LEAD_UNIT,
	   T3.DESCRIPTION,
       T6.DESCRIPTION AS CATEGORY
FROM SR_HEADER T1
INNER JOIN SR_STATUS T2 ON T2.STATUS_CODE = T1.STATUS_CODE
INNER JOIN SR_TYPE T3 ON T3.TYPE_CODE = T1.TYPE_CODE
LEFT join unit T4 ON T4.UNIT_NUMBER = T1.UNIT_NUMBER
left join SR_PRIORITY t5 on t5.PRIORITY_ID = t1.PRIORITY_ID
LEFT JOIN SR_CATEGORY T6 ON T6.CATEGORY_CODE = T1.CATEGORY_CODE
LEFT JOIN PERSON T7 ON T7.PERSON_ID = T1.REPORTER_PERSON_ID
WHERE T1.SR_HEADER_ID = AV_MODULE_ITEM_ID;

END
